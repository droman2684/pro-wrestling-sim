{% extends "base.html" %}

{% block title %}Create Stable - Pro Wrestling Sim{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <h2 class="mb-4"><i class="bi bi-shield me-2 text-gold"></i>Create Stable</h2>

        <form method="post">
            <div class="card mb-4 border-0 shadow-sm">
                <div class="card-body p-4">
                    <div class="mb-4">
                        <label class="form-label fw-bold text-muted small">STABLE NAME *</label>
                        <input type="text" name="name" class="form-control form-control-lg" required placeholder="The Corporation">
                    </div>

                    <div class="mb-4">
                        <label class="form-label fw-bold text-muted small">SELECT MEMBERS (MINIMUM 3) *</label>
                        <select name="members" class="form-select" multiple size="10" required>
                            {% for w in wrestlers %}
                            {% if not game.get_wrestler_stable(w.id) %}
                            <option value="{{ w.id }}">{{ w.name }} [OVR: {{ w.get_overall_rating() }}] - {{ w.alignment }}</option>
                            {% endif %}
                            {% endfor %}
                        </select>
                        <div class="form-text small text-muted mt-2">Hold Ctrl (Windows) or Cmd (Mac) to select multiple wrestlers. Select at least 3.</div>
                    </div>

                    <div class="mb-0">
                        <label class="form-label fw-bold text-muted small">LEADER *</label>
                        <select name="leader" class="form-select" required>
                            <option value="">Select leader (must be a member)...</option>
                            {% for w in wrestlers %}
                            {% if not game.get_wrestler_stable(w.id) %}
                            <option value="{{ w.id }}">{{ w.name }}</option>
                            {% endif %}
                            {% endfor %}
                        </select>
                        <div class="form-text small text-muted mt-2">The leader must be included in the members selection above.</div>
                    </div>
                </div>
            </div>

            <div class="info-box mb-4 bg-light border-0 shadow-sm">
                <h6 class="fw-bold text-primary mb-2"><i class="bi bi-info-circle me-2"></i>About Stables</h6>
                <ul class="small mb-0 text-muted ps-3">
                    <li>Stables require at least 3 members</li>
                    <li>Each wrestler can only be in one active stable</li>
                    <li>Stablemates can interfere in matches (20-40% chance)</li>
                    <li>When a stablemate wins, others get +2 heat</li>
                    <li>When a stablemate loses, others get -1 heat</li>
                </ul>
            </div>

            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-gold btn-lg px-5 shadow-sm">
                    <i class="bi bi-shield me-1"></i>Create Stable
                </button>
                <a href="{{ url_for('stables') }}" class="btn btn-outline-primary btn-lg px-4 border-0">Cancel</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}